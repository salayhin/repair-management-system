<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Repair Orders tabular view</h5>
        </div>
        <div class="ibox-content">

          <div class="table-responsive">
            <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper form-inline dt-bootstrap">
              <div class="html5buttons">
                <div class="dt-buttons btn-group">
                  <a href="<%= repair_orders_path(format: :pdf) %>" target="_blank" class="btn btn-default buttons-pdf buttons-html5" tabindex="0" aria-controls="DataTables_Table_0"><span>PDF</span></a>
                  <!--<a class="btn btn-default buttons-copy buttons-html5" tabindex="0" aria-controls="DataTables_Table_0"><span>Copy</span></a>-->
                  <!--<a class="btn btn-default buttons-csv buttons-html5" tabindex="0" aria-controls="DataTables_Table_0"><span>CSV</span></a>-->
                  <!--<a class="btn btn-default buttons-excel buttons-html5" tabindex="0" aria-controls="DataTables_Table_0"><span>Excel</span></a>-->
                  <!--<a class="btn btn-default buttons-print" tabindex="0" aria-controls="DataTables_Table_0"><span>Print</span></a>-->
                </div>
              </div>



              <table class="table table-striped table-bordered table-hover dataTables-example dataTable" id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info" role="grid">
                <thead>
                <tr role="row">
                  <th class="sorting_asc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 168px;" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">
                    Device Name
                  </th>
                  <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 204px;" aria-label="Browser: activate to sort column ascending">
                    Assigned (To/By)
                  </th>
                  <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 204px;" aria-label="Browser: activate to sort column ascending">
                    Customer Info.
                  </th>
                  <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 176px;" aria-label="Platform(s): activate to sort column ascending">
                    Device Condition
                  </th>
                  <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 140px;" aria-label="Engine version: activate to sort column ascending">
                    Service Center
                  </th>
                  <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 95px;" aria-label="CSS grade: activate to sort column ascending">Action</th>
                </tr>
                </thead>
                <tbody>
                <% @repair_orders.each_with_index do |order, i| %>
                    <tr class="gradeA <%= i%2 == 0 ? 'odd' : 'even' %>" role="row">
                      <td class="sorting_1">
                        <%= order.device_model.name %> | <%= order.device_brand.name %>
                        <% if order.repair_information.deliverable %>
                            <span class="badge badge-success"><%= t('repair_order.deliver') %></span><br/>
                            <%= link_to t('repair_order.delivery'), deliver_repair_order_path(order), method: 'post', data: { confirm: t('repair_order.confirm_deliver') }  %>
                        <% end %>
                      </td>
                      <td>
                        <p>To: <%= order.repair_assignments.last.assigned.profile.full_name %> </p>
                        <p>By: <%= order.repair_assignments.last.assigner.profile.full_name %> </p>
                      </td>
                      <td class="center">
                        <p><%= order.customer_name %></p>
                        <p><%= order.customer_contact_no %></p>
                        <p><%= order.customer_email %></p>
                      </td>
                      <td class="center">
                        <% order.device_condition.each do |con| %>
                            <p><%= RepairOrder::DEVICE_CONDITIONS[con.to_i] %></p>
                        <% end %>
                      </td>
                      <td><%= order.service_center.name %></td>
                      <td>
                        <%= link_to 'Show', repair_order_path(order), :class => 'btn btn-white btn-xs' %>
                        <%= link_to 'Edit', edit_repair_order_path(order), :class => 'btn btn-primary btn-xs' %>
                        <%= link_to 'Delete', repair_order_path(order), :method => :delete, :confirm => 'Are you sure?', :class => 'btn btn-xs btn-danger' %>
                        <% if is_assigned_technician(order) && !order_delivered(order) %>
                            <%= link_to 'Repair', repair_information_path(order.repair_information), :class => 'btn btn-xs btn-info' %>
                        <% end %>
                      </td>
                    </tr>
                <% end %>
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>